<!doctype html>
<html>
<head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <meta charset="utf-8">
    <title>Final Project</title>
</head>

<body>
    <style>
        #court {
            background-color: burlywood;
        }
    </style>
    <div id="left-container"></div>
    <div id="right-container">
        <div id="top">
        </div>
        <div id="bottom">
        </div>
    </div>
    <script>
        // Test d3 was loaded
        console.log(d3);

        var WIDTH = 500;
        var HEIGHT = 500;

        // Create the court SVG
        var courtSVG = d3.select("#top")
            .append("svg")
            .attr("id", "court")
            .attr("width", WIDTH)
            .attr("height", HEIGHT);

        courtSVG.append("g")
            .append("text")
            .text("Test")
            .attr("x", 100)
            .attr("y", 100)

        // Load the CSV
        d3.csv("../Resources/James Harden.csv").then(function(data, error) {
            if (error) {
                throw error;
            }
            data.forEach(function(d) {
                // Print out every line in csv to console
                // console.log(d);

                //Store the data
                d.distance = d.SHOT_DISTANCE;
                d.x = d.LOC_X;
                d.y = d.LOC_Y;
                d.made = d.SHOT_MADE_FLAG;
            });

            function scaleShotsX(x, width) {
                var scaleX = d3.scaleLinear().domain([-245, 245]).range([0, width]);
                return scaleX(x).toFixed(0);
            }

            function scaleShotsY(y, height) {
                var scaleY = d3.scaleLinear().domain([-50, 700]).range([0, height]);
                return scaleY(y).toFixed(0);
            }
            console.log(data[1].x);
            courtSVG.select("g")
                .selectAll("shots")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", function(d) {
                    return scaleShotsX(d.x, WIDTH);
                })
                .attr("cy", function(d) {
                    return scaleShotsY(d.y, HEIGHT);
                })
                .attr("r", 5)
                .style("fill", function(d) {
                    if (d.made == 1) {
                        return "green";
                    }
                    return "red";
                });
        });
    </script>
</body>
</html>
